fragment FragmentDOMElementByNameOrXPathInput on DOMElementByNameOrXPath {
  name {
    value
  }
  xpath {
    value
  }
}

subscription registerAgent($data: RegisterAgentInput!) {
  registerAgent(data: $data) {
    scrape {
      id
      corrId
      debug {
        screenshot
        cookies
        console
        network
        html
      }
      page {
        url
        prerender {
          waitUntil
          viewport {
            isLandscape
            width
            isMobile
            height
          }
        }
        timeout
        actions {
          type {
            element {
              value
            }
            typeValue
          }
          wait {
            element {
              ...FragmentDOMElementByNameOrXPathInput
            }
          }
          select {
            element {
              value
            }
            selectValue
          }
          header {
            value
            name
          }
          click {
            position {
              x
              y
            }
            element {
              ...FragmentDOMElementByNameOrXPathInput
            }
            iframe {
              xpath {
                value
              }
              nestedElement {
                ...FragmentDOMElementByNameOrXPathInput
              }
            }
          }
          cookie {
            value
          }
        }
      }
      emit {
        fragment {
          xpath {
            value
          }
          boundingBox {
            y
            x
            w
            h
          }
        }
        types
      }
    }
    authentication {
      token
    }
  }
}

mutation authAnonymous {
  authAnonymous {
    token
  }
}

mutation submitAgentJobData($data: SubmitAgentDataInput!) {
  submitAgentData(data: $data)
}
