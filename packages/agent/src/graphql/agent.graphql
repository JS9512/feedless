fragment FragmentDOMElementByNameOrXPathInput on DOMElementByNameOrXPath {
  name {
    value
  }
  xpath {
    value
  }
}

subscription registerAgent($data: RegisterAgentInput!) {
  registerAgent(data: $data) {
    scrape {
      id
      corrId
      debug {
        screenshot
        cookies
        console
        network
        html
      }
      page {
        url
        prerender {
          waitUntil
          language
          additionalWaitSec
          viewport {
            isLandscape
            width
            isMobile
            height
          }
        }
        timeout
        actions {
          type {
            element {
              value
            }
            typeValue
          }
          wait {
            element {
              ...FragmentDOMElementByNameOrXPathInput
            }
          }
          select {
            element {
              value
            }
            selectValue
          }
          header {
            value
            name
          }
          click {
            position {
              x
              y
            }
            element {
              ...FragmentDOMElementByNameOrXPathInput
            }
          }
        }
      }
      emit {
        fragmentName
        imageBased {
          boundingBox {
            y
            x
            w
            h
          }
        }
        selectorBased {
          xpath {
            value
          }
          expose {
            pixel
          }
        }
      }
    }
    authentication {
      token
    }
  }
}

mutation authAnonymous {
  authAnonymous {
    token
  }
}

mutation submitAgentJobData($data: SubmitAgentDataInput!) {
  submitAgentData(data: $data)
}
