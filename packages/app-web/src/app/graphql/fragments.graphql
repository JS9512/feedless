fragment SelectorsFragment on Selectors {
  contextXPath
  linkXPath
  extendContext
  dateXPath
  dateIsStartOfEvent
}

fragment SourceSubscriptionFragment on SourceSubscription {
  id
  ownerId
  title
  description
  visibility
  createdAt
  activity {
    items {
      count
      index
    }
  }
  updatedAt
  plugins {
    pluginId
    params {
      genericFeed {
        extendContext
        linkXPath
        contextXPath
        dateIsStartOfEvent
        dateXPath
      }
      diffEmailForward {
        inlineDiffImage
        inlineLatestImage
        inlinePreviousImage
        compareBy
        nextItemMinIncrement
      }
      filters {
        type
        value
        field
        operator
      }
      fulltext {
        readability
      }
      rawJson
    }
  }
  segmented {
    digest
    size
    sortAsc
    sortBy
  }
  scheduleExpression
  disabledFrom
  archived
  documentCount
  retention {
    maxAgeDays
    maxItems
  }
  sources {
    id
    debug {
      network
      html
      console
      cookies
      screenshot
    }
    emit {
      selectorBased {
        min
        max
        xpath {
          value
        }
        expose {
          pixel
          fields {
            min
            max
            name
            value {
              set
              html {
                xpath {
                  value
                }
              }
              text {
                regex
              }
            }
          }
          transformers {
            pluginId
            params {
              genericFeed {
                contextXPath
                dateXPath
                dateIsStartOfEvent
                extendContext
                linkXPath
              }
            }
          }
        }
      }
      imageBased {
        boundingBox {
          x
          y
          w
          h
        }
      }
    }
    page {
      url
      timeout
      prerender {
        viewport {
          ...ViewportFragment
        }
      }
      actions {
        ...ActionFragment
      }
    }
  }
}

fragment ViewportFragment on ViewPort {
  height
  width
  isLandscape
  isMobile
}

fragment ReadabilityFragment on ScrapedReadability {
  url
  content
  contentMime
  contentText
  date
  faviconUrl
  imageUrl
  title
}

fragment NestedScrapedFieldFragment on ScrapedField {
  ...ScrapedFieldFragment
}
fragment ScrapedFieldFragment on ScrapedField {
  xpath {
    value
  }
  name
  value {
    one {
      mimeType
      data
    }
    many {
      mimeType
      data
    }
    nested {
      name
      xpath {
        value
      }
    }
  }
}

fragment RefineOptionsFragment on RefineOptions {
  filter
}

fragment ActionFragment on ScrapeAction {
  type {
    element {
      value
    }
  }
  cookie {
    value
  }
  click {
    element {
      xpath {
        value
      }
      name {
        value
      }
    }
  }
  header {
    value
    name
  }
  select {
    element {
      value
    }
    selectValue
  }
  wait {
    element {
      name {
        value
      }
      xpath {
        value
      }
    }
  }
}
fragment ScrapeOptionsFragment on ScrapeRequest {
  page {
    prerender {
      viewport {
        ...ViewportFragment
      }
    }
    actions {
      ...ActionFragment
    }
    url
    timeout
  }
}

fragment FeatureFragment on Feature {
  name
  value {
    numVal {
      value
    }
    boolVal {
      value
    }
  }
}

fragment PlanFragment on Plan {
  id
  name
  availability
  isPrimary
  currentCosts
  beforeCosts
}

fragment PaginationFragment on Pagination {
  page
  isLast
  isFirst
  isEmpty
}

fragment WebDocumentFragment on WebDocument {
  id
  contentTitle
  contentRawMime
  contentRawBase64
  contentText
  url
  imageUrl
  createdAt
  publishedAt
  startingAt
}

fragment EnclosureFragment on Enclosure {
  size
  duration
  type
  url
}

fragment ContentFragment on WebDocument {
  contentTitle
  contentText
  contentRawBase64
  contentRawMime
  url
  imageUrl
  publishedAt
  startingAt
  updatedAt
  createdAt
  enclosures {
    ...EnclosureFragment
  }
}

fragment NativeFeedFragment on NativeFeed {
  title
  description
  domain
  imageUrl
  iconUrl
  websiteUrl
  feedUrl
  status
  lastCheckedAt
  errorMessage
  lastChangedAt
  streamId
  lat
  lon
  ownerId
  createdAt
}
