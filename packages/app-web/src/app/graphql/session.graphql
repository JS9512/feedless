fragment CloudSubscriptionFragment on CloudSubscription {
  productId
  startedAt
  terminatedAt
}

fragment UserFragment on User {
  id
  hasAcceptedTerms
  hasCompletedSignup
  email
  firstName
  lastName
  createdAt
  purgeScheduledFor
  secrets {
    ...SecretFragment
  }
  subscription {
    ...CloudSubscriptionFragment
  }
}
query session {
  session {
    isLoggedIn
    user {
      ...UserFragment
    }
  }
}

mutation updateCurrentUser($data: UpdateCurrentUserInput!) {
  updateCurrentUser(data: $data)
}

mutation createUser($data: CreateUserInput!) {
  createUser(data: $data) {
    id
  }
}

mutation logout {
  logout
}

fragment SecretFragment on UserSecret {
  id
  validUntil
  type
  lastUsed
  value
  valueMasked
}

mutation createUserSecret {
  createUserSecret {
    ...SecretFragment
  }
}

mutation deleteUserSecrets($data: DeleteUserSecretsInput!) {
  deleteUserSecrets(data: $data)
}
