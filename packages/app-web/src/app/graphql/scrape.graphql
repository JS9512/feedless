fragment ScrapeExtractFragmentFragment on ScrapeExtractFragment {
  data {
    mimeType
    data
  }
  text {
    data
  }
  html {
    data
  }
}
fragment ScrapeExtractResponseFragment on ScrapeExtractResponse {
  fragmentName
  fragments {
    ...ScrapeExtractFragmentFragment
    extracts {
      fragmentName
      fragments {
        ...ScrapeExtractFragmentFragment
      }
    }
  }
}

query scrape2($data: ScrapeRequestInput!) {
  scrape(
    data: {
      title: ""
      flow: {
        sequence: [
          { fetch: { get: { url: { literal: "$url" } } } }
          {
            execute: {
              pluginId: "${'$'}pluginId"
              params: { org_feedless_feed: {} }
            }
          }
        ]
      }
    }
  ) {
    outputs {
      index
      response {
        fetch {
          data
        }
        execute {
          pluginId
          data {
            org_feedless_feed {
              title
              feedUrl
              publishedAt
              items {
                publishedAt
                url
                createdAt
                id
              }
            }
          }
        }
      }
    }
  }
}
query scrape($data: ScrapeRequestInput!) {
  scrape(data: $data) {
    outputs {
      index
      response {
        extract {
          ...ScrapeExtractResponseFragment
        }
        fetch {
          data
          debug {
            console
            contentType
            cookies
            corrId
            screenshot
            statusCode
            viewport {
              ...ViewportFragment
            }
          }
        }
        execute {
          pluginId
          data {
            org_feedless_feed {
              ...RemoteNativeFeedFragment
            }
            org_feedless_feeds {
              genericFeeds {
                selectors {
                  ...SelectorsFragment
                }
                score
                hash
                count
              }
              nativeFeeds {
                ...RemoteNativeFeedFragment
              }
            }
            org_feedless_fulltext {
              ...ReadabilityFragment
            }
            jsonData
          }
        }
      }
    }
    failed
    errorMessage
  }
}
