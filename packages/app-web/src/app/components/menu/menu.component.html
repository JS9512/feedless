<ion-popover #popover
             [animated]="false"
             [showBackdrop]="false"
             (ionPopoverWillPresent)="focusSearchbar()"
             (keydown.arrowDown)="focusNext()"
             (keydown.arrowUp)="focusPrevious()"
             (keydown.escape)="clearOrDismiss($event)"
             (keydown.enter)="pickInFocus($event)"
             side="bottom"
             alignment="start">
  <ng-template>
    <ion-content>
      <ion-header *ngIf="!hideFilter">
        <ion-searchbar [placeholder]="placeholder"
                       #searchbar
                       class="ion-no-padding"
                       (ngModelChange)="indexInFocus = 0"
                       [(ngModel)]="query"></ion-searchbar>
      </ion-header>
      <ion-list>
        <ion-item *ngFor="let option of filteredOptions(); let i = index"
                  (mouseenter)="indexInFocus = i"
                  [ngClass]="{'--focus': i === indexInFocus,
                  '--selected': option.value === value}"
                  (click)="pick(option)"
                  [button]="true">
          <ion-label>
            {{option.label}}
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>

<ion-button (click)="togglePopover(popover, $event)"
            [color]="getColor()">
  <ng-content></ng-content>
</ion-button>
