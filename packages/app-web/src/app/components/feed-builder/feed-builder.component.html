<div class="flex__column">
  <div *ngIf="!hideSearchBar">
    <ion-toolbar style="padding: 10px">
      <app-searchbar
        (querySubmit)="handleQuery($event)"
        [value]="url"
        [loading]="loading"
        (cancelReceived)="handleCancel()"
        buttonText="Create"
        color="primary"
        placeholder="Type a Url of a website"
      ></app-searchbar>
      <p
        style="color: var(--ion-color-danger)"
        *ngIf="errorMessage"
        class="ion-margin-horizontal"
      >
        We ran into a problem! {{ errorMessage }}
      </p>
    </ion-toolbar>
  </div>
  <div class="flex">
    <div *ngIf="loading" class="ion-margin">
      <ion-spinner name="dots"></ion-spinner>
    </div>

    <!--  <div-->
    <!--    *ngIf="!loading && !scrapeResponse"-->
    <!--    style="-->
    <!--      height: 300px;-->
    <!--      align-items: center;-->
    <!--      justify-content: center;-->
    <!--      display: flex;-->
    <!--    "-->
    <!--  >-->
    <!--  </div>-->

    <app-transform-website-to-feed
      (selectedFeedChange)="selectedFeed = $event"
      (statusChange)="hasFeed = $event === 'valid'"
      *ngIf="scrapeResponse"
      [scrapeRequest]="scrapeRequest"
      [scrapeResponse]="scrapeResponse"
    >
      <ion-item
        (click)="showActionsModal()"
        class="cy-enable-js-button"
        [button]="true"
        topSlot
      >
        Enable Javascript
        <ion-icon name="settings-outline" slot="end"></ion-icon>
      </ion-item>
      <ion-item
        (click)="finalizeFeed()"
        [button]="true"
        [color]="hasFeed ? 'success' : 'medium'"
        bottomSlot
      >
        Finalize Feed
        <ion-icon name="flask-outline" slot="end"></ion-icon>
      </ion-item>
    </app-transform-website-to-feed>
  </div>
</div>
