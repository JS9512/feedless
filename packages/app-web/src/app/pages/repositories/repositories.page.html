<ion-content>
  <div class="limited-width-pane">
    <ion-toolbar>
      <ion-buttons slot="end">
        <ion-button (click)="handleExport()">Export</ion-button>
        <ion-button color="primary" fill="solid" routerLink="create">New Repository</ion-button>
      </ion-buttons>
    </ion-toolbar>

    <ion-list [ngClass]="{grid: gridLayout}">
      <ion-item *ngIf="entities?.length === 0">
        <ion-label>
          <em
          >You have no repositories.
            <!--            or-->
            <!--            <a (click)="handleImport()" style="cursor: pointer">import</a>-->
          </em>
        </ion-label>
      </ion-item>

      <ion-row
        *ngFor="let entity of entities"
        style="border-bottom: 1px solid var(--ion-color-step-200)"
      >
        <!--        <ion-col size="1" class="ion-align-self-center hide-when-grid">-->
        <!--          <ion-item>-->
        <!--            <ion-checkbox-->
        <!--              aria-label="check"-->
        <!--              (ionChange)="onCheckChange($event, entity)"-->
        <!--              [checked]="isChecked(entity)"-->
        <!--              color="success"-->
        <!--            ></ion-checkbox>-->
        <!--          </ion-item>-->
        <!--        </ion-col>-->
        <ion-col size="12">
          <ion-item lines="full">
            <ion-label>
              <div class="flex">
                  <a [routerLink]="'/repositories/' + entity.id" class="ion-align-self-center">
                    <h3 class="ion-padding-end">
                      {{ entity.title }}
                    </h3>
                  </a>
                <ion-chip [outline]="true">{{entity.visibility}}</ion-chip>
                <ion-chip [outline]="true" *ngIf="entity.sources.length === 0">No Sources</ion-chip>
              </div>

              <p class="description">{{ entity.description }}</p>
              <p>Updated 9 hours ago</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-infinite-scroll (ionInfinite)="nextPage($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </ion-list>
  </div>
</ion-content>
