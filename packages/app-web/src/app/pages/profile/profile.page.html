<ion-content>
  <div class="limited-width-pane">
    <ion-row style="margin-top: 200px">
      <ion-col size="8">
        <h1 class="ion-no-margin">Profile</h1>
      </ion-col>
      <ion-col class="actions" size="4">
        <ion-buttons class="ion-float-end">
          <ion-button
            (click)="logout()"
            class="cy-logout-button"
            color="danger"
            fill="solid"
          >
            Logout
          </ion-button>
        </ion-buttons>
      </ion-col>
    </ion-row>
    <ion-list>
      <!--      <ion-list-header> General</ion-list-header>-->
      <!--      <ion-item>-->
      <!--        <ion-select label="Feature State" value="stable">-->
      <!--          <ion-select-option value="experimental"-->
      <!--            >Experimental-->
      <!--          </ion-select-option>-->
      <!--          <ion-select-option value="beta">Beta</ion-select-option>-->
      <!--          <ion-select-option value="stable">Stable</ion-select-option>-->
      <!--        </ion-select>-->
      <!--      </ion-item>-->
      <!--      <ion-list-header>-->
      <!--        <a-->
      <!--          href="https://github.com/damoeb/feedless/blob/master/docs/plugins.md"-->
      <!--          referrerpolicy="no-referrer"-->
      <!--          target="_blank"-->
      <!--          >Plugins</a-->
      <!--        ></ion-list-header-->
      <!--      >-->
      <!--      <ion-item>-->
      <!--        <ion-checkbox [checked]="true" [disabled]="true" labelPlacement="start">Detect Media <ion-note>using <a target="_blank" referrerpolicy="no-referrer" href="https://github.com/yt-dlp/yt-dlp">yt-dlp</a></ion-note></ion-checkbox>-->
      <!--      </ion-item>-->
      <!--      <ion-item *ngFor="let ref of plugins">-->
      <!--        <ion-checkbox [formControl]="ref.fc" labelPlacement="start">-->
      <!--          <span>{{ref.plugin.id}}</span>-->
      <!--          <ion-note class="ion-padding-start"-->
      <!--            >{{ref.plugin.description}}</ion-note-->
      <!--          >-->
      <!--        </ion-checkbox>-->
      <!--      </ion-item>-->
      <!--      <ion-item *ngFor="let plugin of plugins">-->
      <!--        <ion-checkbox [checked]="true" -->
      <!--                      [disabled]="true" -->
      <!--                      labelPlacement="start">Detect Media <ion-note>using <a target="_blank" referrerpolicy="no-referrer" href="https://github.com/yt-dlp/yt-dlp">yt-dlp</a></ion-note></ion-checkbox>-->
      <!--      </ion-item>-->

      <!--      <ion-row>-->
      <!--        <ion-col size="6">-->
      <!--          <ion-item>-->
      <!--            <ion-label>Plan</ion-label>-->
      <!--          </ion-item>-->
      <!--        </ion-col>-->
      <!--        <ion-col size="6">-->
      <!--          <ion-item color="primary">-->
      <!--            <ion-label>Free Plan</ion-label>-->
      <!--          </ion-item>-->
      <!--        </ion-col>-->
      <!--      </ion-row>-->

      <!--      <ion-list-header class="ion-margin-top"> Data </ion-list-header>-->
      <!--      <ion-item (click)="importAny()" [button]="true">-->
      <!--        <ion-label>Import</ion-label>-->
      <!--        <ion-note>OPML, Feeds and other sources</ion-note>-->
      <!--      </ion-item>-->
      <!--      <ion-item (click)="exportOPML()" [button]="true">-->
      <!--        <ion-label> Export OPML </ion-label>-->
      <!--      </ion-item>-->

      <ion-row class="ion-margin-top">
        <ion-col class="ion-padding-start" size="6">Keys</ion-col>
        <ion-col class="ion-text-right" size="6">
          <ion-button
            (click)="createUserSecret()"
            color="primary"
            fill="clear"
            size="small"
            >Add User Secret
          </ion-button>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="secrets?.length > 0">
        <ion-col size="6"></ion-col>
        <ion-col size="2">Last Used</ion-col>
        <ion-col size="2">Valid Until</ion-col>
      </ion-row>
      <ion-row *ngIf="secrets?.length === 0">
        <ion-col class="ion-padding-start" size="12">
          <ion-note><em>No User Secrets defined</em></ion-note>
        </ion-col>
      </ion-row>
      <ng-container *ngFor="let secret of secrets">
        <ion-row *ngIf="secret.valueMasked">
          <ion-col class="ion-padding-start" size="6">{{secret.value}}</ion-col>
          <ion-col size="2">{{secret.lastUsed || 'never'}}</ion-col>
          <ion-col size="2"
            >{{secret.validUntil | date: dateTimeFormat}}</ion-col
          >
          <ion-col class="ion-text-right" size="2">
            <ion-button
              (click)="deleteSecret(secret)"
              color="danger"
              fill="clear"
              size="small"
              >Delete
            </ion-button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="!secret.valueMasked">
          <ion-col class="ion-padding-start" size="8">
            <ion-input [readonly]="true" [value]="secret.value"></ion-input>
          </ion-col>
          <ion-col size="2"
            >{{secret.validUntil | date: dateTimeFormat}}</ion-col
          >
          <ion-col class="ion-text-right" size="2">
            <ion-button color="success" fill="outline" size="small"
              >Copy
            </ion-button>
          </ion-col>
        </ion-row>
      </ng-container>
    </ion-list>
    <div style="color: var(--ion-color-danger)">
      <ion-row style="margin-top: 100px">
        <ion-col size="8">
          <h1 class="ion-no-margin">Danger Zone</h1>
        </ion-col>
      </ion-row>
      <ion-list style="border: 1px solid var(--ion-color-danger)">
        <ion-item
          (click)="deleteAccount()"
          [button]="true"
          style="--color: var(--ion-color-danger)"
        >
          Delete Account
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>
